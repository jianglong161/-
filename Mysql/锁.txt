锁
1.什么是锁
	锁是数据库区别与文件系统的一个关键特性
	使用锁是为了支持对共享资源进行并发访问，提供数据的完整性和一致性。
2.lock与latch
	latch：对象是线程，保护的是数据结构，无死锁。
		成为闩锁，轻量级的锁，要求锁的时间特别短，若持续时间长，性能弱
		mutex互斥量，rwlock读写锁
	lock:对象是事务，用来锁定的是数据库的对象，表，页，行
		一般lock的对象仅在事务commit和rollback后进行释放
		有死锁机制
3.InnoDB存储引擎的锁
	3.1.锁的类型：
		InnoDB实现了如下的两种标准的行级锁
			共享锁 S lock：允许事务读一
			排它锁 X lock:允许事务删除或者更新一行
		锁兼容:事务T1获得行r 共享锁，事务T2立即获得r的共享锁，因为读取并没有改变r的数据
		只是多粒度锁定，允许事务在行级上的锁和表级上的锁同时存在。
		意向锁：为了支持不同粒度上的进行加锁操作：InnoDB支持一种额外的锁方式
				把锁定的对象分为更多的层次，希望在更细粒度上进行加锁，
				为表级别的锁，主要是在一个事务中揭示下一行将被请求的锁类型
				1.意向共享锁 ISlock 获得一张表的某几行的共享锁
				2.意向排它锁 IXlock 获得一张表的某几行的排它锁
	3.2.一致性非锁定读
		通过行多版本控制的方式俩读取当前执行时间数据库中行的数据
		如果读取的行正在执行DELETE或者UPDATE,读取的操作不会因此等待行上锁的释放
		会读取行的一个快照数据